!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o={};e.createBus=function(t,e,r){if(void 0===self.__Bus__&&Object.defineProperty(self,"__Bus__",{value:o,writable:!1}),self.__Bus__[t])throw new Error("[obvious] the bus named "+t+" has been defined before, please rename your bus");var i=new n.Bus(t,e,r);return Object.defineProperty(self.__Bus__,t,{value:i,writable:!1}),i},e.getBus=function(t){return self.__Bus__&&self.__Bus__[t]}},function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",(function(){return o})),r.d(e,"__assign",(function(){return i})),r.d(e,"__rest",(function(){return s})),r.d(e,"__decorate",(function(){return a})),r.d(e,"__param",(function(){return u})),r.d(e,"__metadata",(function(){return c})),r.d(e,"__awaiter",(function(){return l})),r.d(e,"__generator",(function(){return f})),r.d(e,"__createBinding",(function(){return d})),r.d(e,"__exportStar",(function(){return p})),r.d(e,"__values",(function(){return h})),r.d(e,"__read",(function(){return v})),r.d(e,"__spread",(function(){return b})),r.d(e,"__spreadArrays",(function(){return _})),r.d(e,"__await",(function(){return y})),r.d(e,"__asyncGenerator",(function(){return m})),r.d(e,"__asyncDelegator",(function(){return w})),r.d(e,"__asyncValues",(function(){return g})),r.d(e,"__makeTemplateObject",(function(){return E})),r.d(e,"__importStar",(function(){return O})),r.d(e,"__importDefault",(function(){return j})),r.d(e,"__classPrivateFieldGet",(function(){return S})),r.d(e,"__classPrivateFieldSet",(function(){return B}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function o(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function a(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function u(t,e){return function(r,n){e(r,n,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function f(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function d(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function p(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function m(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){o[t]&&(n[t]=function(e){return new Promise((function(r,n){i.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=o[t](e)).value instanceof y?Promise.resolve(r.value.v).then(u,c):l(i[0][2],r)}catch(t){l(i[0][3],t)}var r}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function w(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:y(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function g(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=h(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function j(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function B(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return"[object Object]"===Object.prototype.toString.call(t)};e.Errors={removeNonExistedBroadcast:function(t){return"[obvious] you are trying to remove a listener of the broadcast event "+t+", but "+t+" hasn't been registed as a broadcast event"},wrongBroadcastCallback:function(t){return"[obvious] you are trying to remove a listener of the broadcast event "+t+", but the listener hasn't been registed"},broadcastCallbackError:function(t){return"[obvious] one of the callbacks of the broadcast event "+t+" throws an uncaught error"},removeNonExistedUnicast:function(t){return"[obvious] you are trying to remove a listener of the unicast event "+t+", but "+t+" hasn't been registed as a unicast event"},wrongUnicastCallback:function(t){return"[obvious] you are trying to remove a listener of the unicast event "+t+", but the listener hasn't been registed"},registedExistedUnicast:function(t){return"[obvious] you are trying to regist a unicast event "+t+", but it has been registed before"},createExistingApp:function(t){return"[obvious] "+t+" is existing, you are not allowed to create it again"},resourceNotDeclared:function(t,e){return"[obvious] can not find any assets of the app "+t+" on the bus "+e},appNotCreated:function(t){return"[obvious] you are trying to activate app "+t+", but it was not created"},modifyPrivateState:function(t){return"[obvious] state "+t+" is private, you are not allowed to set it"},accessUninitializedState:function(t){return"[obvious] it's not allowed to set, watch or unwatch state "+t+" before it is initialized"},waitStateTimeout:function(t){return"[obvious] wait for states "+JSON.stringify(t)+" timeout"},duplicatedInitial:function(t){return"[obvious] duplicated initialized state "+t},initialStateAsUndefined:function(t){return"[obvious] state "+t+" can't be initialized to undefined, please initial it to null instead"},stateIsReadOnly:function(){return"[obvious] bus.state is readonly"},invalidResource:function(t){return"[obvious] "+t+" is not a valid asset"},bootstrapNumberOverflow:function(){return"[obvious] the number of apps bootstraped at a time is greater than the maximum value of 100, it means that there may be circular dependencies, please check the app dependencies declaration or reset the bus's maxBootstrapNumberOnce"},regardArrayAsObject:function(t,e){return"[obvious] state."+t+' is an Array, but the subscript you set("'+e+'") is not a number, therefore, the state will not be changed'},regardBasicTypeAsObject:function(t,e){return"[obvious] state."+t+" is a "+e+", buy you regard it as a object and try to traverse it while setting state, therefore, the state will not be changed"}},e.Warnings={emptyBroadcastEvents:function(t){return"[obvious] you have emitted "+t+" event, but there is no listener of this event"}},e.getMappedState=function(t){var e={};return Object.keys(t).forEach((function(r){e[r]=t[r].value})),JSON.parse(JSON.stringify(e))},e.get=function(t,e){for(var r=t,o=0,i=e;o<i.length;o++){var s=i[o];if(Array.isArray(r)){var a=Number(s);if(isNaN(a))return;r=r[a]}else{if(!n(r))return;r=r[s]}}return r},e.set=function(t,r,o,i){for(var s=r,a=0;a<o.length;a++){var u=o[a],c=Number(u);if(a===o.length-1)if(Array.isArray(s)){if(isNaN(c)){var l=t+"."+o.slice(0,a).join(".");return console.error(e.Errors.regardArrayAsObject(l,u)),!1}s[c]=i}else s[u]=i;else{var f=null;if(Array.isArray(s)){if(isNaN(c)){l=t+"."+o.slice(0,a).join(".");return console.error(e.Errors.regardArrayAsObject(l,u)),!1}f=c}else f=u;if(void 0===s[f]||null===s[f])s[f]={};else if(!Array.isArray(s[f])&&!n(s[f])){l=t+"."+o.slice(0,a+1).join(".");var d=typeof s[f];return console.error(e.Errors.regardBasicTypeAsObject(l,d)),!1}s=s[f]}}return!0},e.getResolvedStates=function(t,e){var r=/^\$state-(.+)-change$/,n=[];return e.forEach((function(e){var o=r.exec(e);if(o){var i=o[1];i.startsWith(t)&&n.push(i)}})),n}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(1),event_emitter_1=__webpack_require__(8),socket_1=__webpack_require__(4),app_1=__webpack_require__(5),utils_1=__webpack_require__(2),Bus=function(){function Bus(name,assets,middleware){var _this=this;void 0===name&&(name=""),void 0===assets&&(assets={}),void 0===middleware&&(middleware={}),this.name=name,this.assets=assets,this.middleware=middleware,this.eventEmitter=new event_emitter_1.EventEmitter,this._state={},this.apps={},this.bootstrapNumberOnce=0,this.allowCrossOriginScript=!0,this.maxBootstrapNumberOnce=100,this.fetchJs=function(src){return tslib_1.__awaiter(_this,void 0,void 0,(function(){var res,code,_a;return tslib_1.__generator(this,(function(_b){switch(_b.label){case 0:return[4,fetch(src)];case 1:return res=_b.sent(),[4,res.text()];case 2:return code=_b.sent(),(null===(_a=this.middleware)||void 0===_a?void 0:_a.handleExecute)?this.middleware.handleExecute(code,src):eval(code),[2]}}))}))},this.loadJs=function(t){return tslib_1.__awaiter(_this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(e){return[2,new Promise((function(e){var r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(){e()},document.body.appendChild(r)}))]}))}))},this.loadCss=function(t){return tslib_1.__awaiter(_this,void 0,void 0,(function(){var e;return tslib_1.__generator(this,(function(r){return(e=document.createElement("link")).rel="stylesheet",e.type="text/css",e.href=t,document.head.appendChild(e),[2]}))}))},this.assets=assets,this.name=name,this.middleware=middleware,Object.defineProperty(this,"state",{get:function(){return utils_1.getMappedState(_this._state)},set:function(){throw new Error(utils_1.Errors.stateIsReadOnly())}})}return Bus.prototype.loadResourcesFromAssetsConfig=function(t){return tslib_1.__awaiter(this,void 0,void 0,(function(){var e,r,n,o,i=this;return tslib_1.__generator(this,(function(s){switch(s.label){case 0:if((e=this.assets)[t].css&&e[t].css.forEach((function(t){/^.+\.css$/.test(t)?i.loadCss(t):console.error(utils_1.Errors.invalidResource(t))})),!e[t].js)return[3,8];r=0,n=e[t].js,s.label=1;case 1:return r<n.length?(o=n[r],/^.+\.js$/.test(o)?this.allowCrossOriginScript?[4,this.loadJs(o)]:[3,3]:[3,6]):[3,8];case 2:return s.sent(),[3,5];case 3:return[4,this.fetchJs(o)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:console.error(utils_1.Errors.invalidResource(o)),s.label=7;case 7:return r++,[3,1];case 8:return e[t].isLib&&(this.apps[t]=!0),[2]}}))}))},Bus.prototype.createSocket=function(){return new socket_1.Socket(this.eventEmitter,this._state)},Bus.prototype.createApp=function(t){if(this.apps[t])throw new Error(utils_1.Errors.createExistingApp(t));var e=new app_1.App(t);return this.apps[t]=e,e},Bus.prototype.loadApp=function(t){var e,r;return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(n){switch(n.label){case 0:return this.assets&&this.assets[t]?[4,this.loadResourcesFromAssetsConfig(t)]:[3,2];case 1:return n.sent(),[3,5];case 2:return(null===(e=this.middleware)||void 0===e?void 0:e.handleLoad)?[4,null===(r=this.middleware)||void 0===r?void 0:r.handleLoad(t,this.allowCrossOriginScript?this.loadJs:this.fetchJs,this.loadCss)]:[3,4];case 3:return n.sent(),[3,5];case 4:throw new Error(utils_1.Errors.resourceNotDeclared(t,this.name));case 5:return[2]}}))}))},Bus.prototype.activateApp=function(t,e){return tslib_1.__awaiter(this,void 0,void 0,(function(){var r;return tslib_1.__generator(this,(function(n){switch(n.label){case 0:return this.apps[t]?[3,2]:[4,this.loadApp(t)];case 1:n.sent(),n.label=2;case 2:if(!this.apps[t])throw new Error(utils_1.Errors.appNotCreated(t));if(!("boolean"!=typeof this.apps[t]))return[3,11];if((r=this.apps[t]).bootstrapped)return[3,8];if(this.bootstrapNumberOnce>this.maxBootstrapNumberOnce)throw this.bootstrapNumberOnce=0,new Error(utils_1.Errors.bootstrapNumberOverflow());return this.bootstrapNumberOnce++,[4,r.activateDependenciesApp(this.activateApp.bind(this))];case 3:return n.sent(),r.doBootstrap?[4,r.doBootstrap(e)]:[3,5];case 4:return n.sent(),[3,7];case 5:return r.doActivate?[4,r.doActivate(e)]:[3,7];case 6:n.sent(),n.label=7;case 7:return r.bootstrapped=!0,this.bootstrapNumberOnce--,[3,11];case 8:return r.doActivate?[4,r.doActivate(e)]:[3,10];case 9:n.sent(),n.label=10;case 10:n.label=11;case 11:return[2]}}))}))},Bus.prototype.destroyApp=function(t,e){return tslib_1.__awaiter(this,void 0,void 0,(function(){var r;return tslib_1.__generator(this,(function(n){switch(n.label){case 0:return(r=this.apps[t])&&"boolean"!=typeof r?r.doDestroy?[4,r.doDestroy(e)]:[3,2]:[3,3];case 1:n.sent(),n.label=2;case 2:delete this.apps[t],delete this._state["app-"+t+"-created"],n.label=3;case 3:return[2]}}))}))},Bus}();exports.Bus=Bus},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(2),i=function(){function t(t,e){this.eventEmitter=t,this._state=e,this.eventEmitter=t,this._state=e}return t.prototype.onBroadcast=function(t,e){this.eventEmitter.addBroadcastEventListener(t,e)},t.prototype.offBroadcast=function(t,e){this.eventEmitter.removeBroadcastEventListener(t,e)},t.prototype.broadcast=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(e=this.eventEmitter).emitBroadcast.apply(e,n.__spreadArrays([t],r))},t.prototype.onUnicast=function(t,e){this.eventEmitter.addUnicastEventListener(t,e)},t.prototype.offUnicast=function(t,e){this.eventEmitter.removeUnicastEventListener(t,e)},t.prototype.unicast=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(e=this.eventEmitter).emitUnicast.apply(e,n.__spreadArrays([t],r))},t.prototype.initState=function(t,e,r){if(void 0===r&&(r=!1),void 0!==this._state[t])throw new Error(o.Errors.duplicatedInitial(t));if(void 0===e)throw new Error(o.Errors.initialStateAsUndefined(t));this._state[t]={value:e,owner:r?this:null},this.broadcast("$state-initial",t)},t.prototype.getState=function(t){var e=o.getMappedState(this._state);return o.get(e,t.split("."))},t.prototype.setState=function(t,e){var r=this,n=t.split("."),i=n[0];if(void 0===this._state[i]){var s=o.Errors.accessUninitializedState(i);throw new Error(s)}var a=this._state[i].owner;if(a!==this&&null!==a){s=o.Errors.modifyPrivateState(i);throw new Error(s)}var u=o.getMappedState(this._state),c="function"==typeof e,l=this.getState(t),f=c?e(l):e;if(1===n.length)this._state[i].value=f;else{var d=n.slice(1);if(!o.set(i,this._state[i].value,d,f))return}var p=o.getMappedState(this._state),h=Object.keys(this.eventEmitter.getBroadcastEvents());o.getResolvedStates(t,h).forEach((function(t){r.broadcast("$state-"+t+"-change",o.get(p,t.split(".")),o.get(u,t.split(".")))}))},t.prototype.watchState=function(t,e){var r=t.split(".")[0];if(void 0===this._state[r]){var n=o.Errors.accessUninitializedState(r);throw new Error(n)}this.eventEmitter.addBroadcastEventListener("$state-"+t+"-change",e)},t.prototype.unwatchState=function(t,e){var r=t.split(".")[0];if(void 0===this._state[r])throw new Error(o.Errors.accessUninitializedState(t));this.eventEmitter.removeBroadcastEventListener("$state-"+t+"-change",e)},t.prototype.waitState=function(t,e){var r=this;return void 0===e&&(e=1e4),0===(t=t.filter((function(t){return void 0===r._state[t]}))).length?Promise.resolve(o.getMappedState(this._state)):new Promise((function(n,i){var s=setTimeout((function(){clearTimeout(s);var e=o.Errors.waitStateTimeout(t);i(new Error(e))}),e),a=function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1),0===t.length&&(clearTimeout(s),r.offBroadcast("$state-initial",a),n(o.getMappedState(r._state)))};r.onBroadcast("$state-initial",a)}))},t}();e.Socket=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=function(){function t(t){this.name=t,this.dependenciesReady=!1,this.bootstrapped=!1,this.dependencies=[],this.name=t}return t.prototype.relyOn=function(t){return this.dependencies=t,this},t.prototype.bootstrap=function(t){return this.doBootstrap=t,this},t.prototype.activate=function(t){return this.doActivate=t,this},t.prototype.destroy=function(t){return this.doDestroy=t,this},t.prototype.activateDependenciesApp=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,o,i,s,a,u;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.dependenciesReady||0===this.dependencies.length)return[3,9];e=0,r=this.dependencies,n.label=1;case 1:return e<r.length?"string"!=typeof(o=r[e])?[3,3]:[4,t(o)]:[3,8];case 2:return n.sent(),[3,7];case 3:if("object"!=typeof o)return[3,7];i=0,s=Object.keys(o),n.label=4;case 4:return i<s.length?(a=s[i],u=o[a],[4,t(a,u)]):[3,7];case 5:n.sent(),n.label=6;case 6:return i++,[3,4];case 7:return e++,[3,1];case 8:this.dependenciesReady=!0,n.label=9;case 9:return[2]}}))}))},t}();e.App=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(0),i={createBus:n.createBus,getBus:o.getBus},s=r(3);e.Bus=s.Bus;var a=r(5);e.App=a.App;var u=r(4);e.Socket=u.Socket;var c=r(0);e.createBus=c.createBus;var l=r(0);e.getBus=l.getBus,e.default=i},function(t,e,r){"use strict";r.r(e);var n=r(6);Object(n.createBus)("host",{"react-app":{js:["http://localhost:3000/static/js/bundle.js","http://localhost:3000/static/js/0.chunk.js","http://localhost:3000/static/js/1.chunk.js","http://localhost:3000/static/js/main.chunk.js"]},"vue-app":{js:["http://localhost:8080/js/app.js","http://localhost:8080/js/chunk-vendors.js"]}}).activateApp("vue-app",{mountPoint:document.getElementById("vue-app")})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=function(){function t(){this.broadcastEvents={},this.uniCastEvents={}}return t.prototype.getBroadcastEvents=function(){return this.broadcastEvents},t.prototype.addBroadcastEventListener=function(t,e){this.broadcastEvents[t]=this.broadcastEvents[t]||[],this.broadcastEvents[t].push(e)},t.prototype.addUnicastEventListener=function(t,e){if(this.uniCastEvents[t])throw new Error(n.Errors.registedExistedUnicast(t));this.uniCastEvents[t]=e},t.prototype.removeBroadcastEventListener=function(t,e){var r=this.broadcastEvents[t];if(!r){s=n.Errors.removeNonExistedBroadcast(t);throw new Error(s)}for(var o=-1,i=0;i<r.length;i++)if(r[i]===e){o=i;break}if(-1===o){var s=n.Errors.wrongBroadcastCallback(t);throw new Error(s)}r.splice(o,1)},t.prototype.removeUnicastEventListener=function(t,e){if(!this.uniCastEvents[t]){var r=n.Errors.removeNonExistedUnicast(t);throw new Error(r)}if(this.uniCastEvents[t]!==e){r=n.Errors.wrongUnicastCallback(t);throw new Error(r)}delete this.uniCastEvents[t]},t.prototype.emitBroadcast=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=this.broadcastEvents[t],i=t.startsWith("$state");o&&0!==o.length?o.forEach((function(t){try{t.apply(void 0,e)}catch(t){console.error(n.Errors.broadcastCallbackError),console.error(t)}})):i||console.warn(n.Warnings.emptyBroadcastEvents(t))},t.prototype.emitUnicast=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.uniCastEvents[t];return n.apply(void 0,e)},t}();e.EventEmitter=o}]);
//# sourceMappingURL=main.js.map